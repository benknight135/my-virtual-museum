block variables
doctype html
html
  head
    meta(charset="utf-8")
    script(src="https://aframe.io/releases/1.0.0/aframe.min.js")
    script(src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js")
    script(src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js")
    title #{title}

  body(style="margin : 0px; overflow: hidden;")
    a-scene(
      vr-mode-ui="enabled: false"
      embedded
      arjs="debugUIEnabled: false; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960;"
      renderer="logarithmicDepthBuffer: true")
      each item in items
        a-marker(preset='custom' type='pattern' url=item.pattern.url)
          if item.model.type === "obj"
            a-entity(
              scale=item.model.scale.x+" "+item.model.scale.y+" "+item.model.scale.z
              obj-model="obj: url("+item.model.obj+"); mtl: url("+item.model.mtl+")")
          if item.model.type === "gltf"
            a-entity(
              scale=item.model.scale.x+" "+item.model.scale.y+" "+item.model.scale.z
              gltf-model="url("+item.model.gltf+");"
              animation-mixer="clip: *; loop: repeat;")
          if item.model.type === "custom"
            #[${item.model.data}]
      a-entity(camera)